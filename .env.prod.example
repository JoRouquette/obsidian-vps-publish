########################################
# .env.prod – config APPLI en production
# À copier depuis ce modèle :
#   cp .env.prod.example .env.prod
# NE PAS COMMITTER .env.prod
########################################

# Environment Node
NODE_ENV=production
PORT=3000

# Dossiers internes (doivent matcher le Dockerfile)
CONTENT_ROOT=/content
ASSETS_ROOT=/assets
UI_ROOT=/ui
UI_SERVER_ROOT=/ui-server

# SSR (Server-Side Rendering) - SEO critical
# ⚠️  KNOWN ISSUE: Angular 20 SSR JIT compilation error (PlatformLocation needs JIT compiler)
# Workaround: SSR gracefully falls back to CSR mode when initialization fails
# Status: Under investigation, see https://github.com/angular/angular/issues/xxxxx
SSR_ENABLED=false                  # Enable Angular SSR (default: true in production, currently disabled)
# UI_SERVER_ROOT=/ui-server         # Path to Angular SSR server bundle (required if SSR_ENABLED=true)

# Logging (évite debug en prod)
LOGGER_LEVEL=info

# Performance tuning (adjust based on CPU cores and expected load)
# MAX_ACTIVE_REQUESTS=200            # Max concurrent HTTP requests (default: 200)
# MAX_CONCURRENT_FINALIZATION_JOBS=8 # Max parallel session finalization jobs (default: 8)

# Asset security (adjust based on your needs)
# MAX_ASSET_SIZE_BYTES=10485760      # Max asset file size in bytes (default: 10MB = 10*1024*1024)
#                                    # Recommended: 5MB-20MB depending on expected content
# VIRUS_SCANNER_ENABLED=true         # Enable ClamAV virus scanning (recommended for production)
# CLAMAV_HOST=clamav                 # ClamAV daemon host (use container name in Docker Compose)
# CLAMAV_PORT=3310                   # ClamAV daemon port (default: 3310)
# CLAMAV_TIMEOUT=10000               # ClamAV scan timeout in ms (default: 10000)

# CORS prod : mets ton vrai domaine
ALLOWED_ORIGINS=https://example.com,app://obsidian

# SEO: Base URL for sitemap and canonical URLs (production)
BASE_URL=https://example.com

# Infos non sensibles
AUTHOR=Jonathan Rouquette
REPO_URL=https://github.com/JoRouquette/obsidian-vps-publish
REPORT_ISSUES_URL=https://github.com/JoRouquette/obsidian-vps-publish/issues

########## SECRETS / BACKEND ###########

# DB PROD – à adapter à ton infra
DATABASE_URL=postgres://obsidian_vps_publish:CHANGE_ME_PASSWORD@db:5432/obsidian_vps_publish

# Secrets applicatifs – À CHANGER ABSOLUMENT
API_KEY=CHANGE_ME_SUPER_SECRET_API_KEY
JWT_SECRET=CHANGE_ME_SUPER_SECRET_JWT
SESSION_SECRET=CHANGE_ME_SUPER_SECRET_SESSION

# Exemple de clés externes (si tu en as besoin)
#SMTP_HOST=smtp.example.com
#SMTP_PORT=587
#SMTP_USER=CHANGE_ME
#SMTP_PASSWORD=CHANGE_ME
#SMTP_FROM=obsidian-vps-publish@example.com

#S3_ENDPOINT=https://s3.example.com
#S3_BUCKET=obsidian-vps-publish-assets
#S3_ACCESS_KEY=CHANGE_ME
#S3_SECRET_KEY=CHANGE_ME
